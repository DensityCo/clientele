dependencies:
  pre:
    - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" >> ~/.npmrc

test:
  override:
    - /bin/true
  post:
    - |
      if [ "$CIRCLE_BRANCH" == "master" ]; then
        echo "Trying to publish package, if it fails then this version has already been published."
        cd languages/javascript && make publish
      else
        echo "Packages are only published to npm on branch 'master'."
      fi
      exit 0
